import { useState } from 'react'

function App() {
  const [text, setText] = useState("")
  const [messages, setMessages] = useState([])

  const getResponse = async () => {
    const response = await fetch(`http://localhost:8000/prompt/${text}`)
      const data = await response.json()
      setMessages([...messages,
        {
          author: data.messages[0].content,
          bot: data.candidates[0].content
        }
    ])
  }

  return (
    <div className='chat-bot'>
      <div className='chat-header'>
        <div className='info-container'>
          <h3>Chat with </h3>
          <h2>Palm2 Bot</h2>
        </div>
          <svg id="visual" viewBox="0 0 900 600" width="900" height="600" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1"><rect x="0" y="0" width="900" height="600" fill="#001220"></rect><path d="M0 30L8.3 30C16.7 30 33.3 30 50 30C66.7 30 83.3 30 100 30C116.7 30 133.3 30 150 31.5C166.7 33 183.3 36 200 37.3C216.7 38.7 233.3 38.3 250 39.2C266.7 40 283.3 42 300 43.5C316.7 45 333.3 46 350 46.5C366.7 47 383.3 47 400 44.7C416.7 42.3 433.3 37.7 450 35.8C466.7 34 483.3 35 500 37.7C516.7 40.3 533.3 44.7 550 44.7C566.7 44.7 583.3 40.3 600 37.2C616.7 34 633.3 32 650 32.3C666.7 32.7 683.3 35.3 700 36.8C716.7 38.3 733.3 38.7 750 39.7C766.7 40.7 783.3 42.3 800 42.5C816.7 42.7 833.3 41.3 850 40.2C866.7 39 883.3 38 891.7 37.5L900 37L900 0L891.7 0C883.3 0 866.7 0 850 0C833.3 0 816.7 0 800 0C783.3 0 766.7 0 750 0C733.3 0 716.7 0 700 0C683.3 0 666.7 0 650 0C633.3 0 616.7 0 600 0C583.3 0 566.7 0 550 0C533.3 0 516.7 0 500 0C483.3 0 466.7 0 450 0C433.3 0 416.7 0 400 0C383.3 0 366.7 0 350 0C333.3 0 316.7 0 300 0C283.3 0 266.7 0 250 0C233.3 0 216.7 0 200 0C183.3 0 166.7 0 150 0C133.3 0 116.7 0 100 0C83.3 0 66.7 0 50 0C33.3 0 16.7 0 8.3 0L0 0Z" fill="#c51cac"></path><path d="M0 31L8.3 31C16.7 31 33.3 31 50 30C66.7 29 83.3 27 100 25.8C116.7 24.7 133.3 24.3 150 24.5C166.7 24.7 183.3 25.3 200 26.8C216.7 28.3 233.3 30.7 250 33C266.7 35.3 283.3 37.7 300 37.3C316.7 37 333.3 34 350 33.2C366.7 32.3 383.3 33.7 400 34.2C416.7 34.7 433.3 34.3 450 33.7C466.7 33 483.3 32 500 30.7C516.7 29.3 533.3 27.7 550 28C566.7 28.3 583.3 30.7 600 31.7C616.7 32.7 633.3 32.3 650 31C666.7 29.7 683.3 27.3 700 27.3C716.7 27.3 733.3 29.7 750 30.2C766.7 30.7 783.3 29.3 800 29C816.7 28.7 833.3 29.3 850 28.8C866.7 28.3 883.3 26.7 891.7 25.8L900 25L900 0L891.7 0C883.3 0 866.7 0 850 0C833.3 0 816.7 0 800 0C783.3 0 766.7 0 750 0C733.3 0 716.7 0 700 0C683.3 0 666.7 0 650 0C633.3 0 616.7 0 600 0C583.3 0 566.7 0 550 0C533.3 0 516.7 0 500 0C483.3 0 466.7 0 450 0C433.3 0 416.7 0 400 0C383.3 0 366.7 0 350 0C333.3 0 316.7 0 300 0C283.3 0 266.7 0 250 0C233.3 0 216.7 0 200 0C183.3 0 166.7 0 150 0C133.3 0 116.7 0 100 0C83.3 0 66.7 0 50 0C33.3 0 16.7 0 8.3 0L0 0Z" fill="#b315a1"></path><path d="M0 26L8.3 25C16.7 24 33.3 22 50 21.2C66.7 20.3 83.3 20.7 100 22.5C116.7 24.3 133.3 27.7 150 27.5C166.7 27.3 183.3 23.7 200 22.3C216.7 21 233.3 22 250 21.5C266.7 21 283.3 19 300 19.8C316.7 20.7 333.3 24.3 350 24.5C366.7 24.7 383.3 21.3 400 19.7C416.7 18 433.3 18 450 19C466.7 20 483.3 22 500 23.3C516.7 24.7 533.3 25.3 550 25.3C566.7 25.3 583.3 24.7 600 25C616.7 25.3 633.3 26.7 650 27.8C666.7 29 683.3 30 700 28.3C716.7 26.7 733.3 22.3 750 20.5C766.7 18.7 783.3 19.3 800 21.5C816.7 23.7 833.3 27.3 850 28.2C866.7 29 883.3 27 891.7 26L900 25L900 0L891.7 0C883.3 0 866.7 0 850 0C833.3 0 816.7 0 800 0C783.3 0 766.7 0 750 0C733.3 0 716.7 0 700 0C683.3 0 666.7 0 650 0C633.3 0 616.7 0 600 0C583.3 0 566.7 0 550 0C533.3 0 516.7 0 500 0C483.3 0 466.7 0 450 0C433.3 0 416.7 0 400 0C383.3 0 366.7 0 350 0C333.3 0 316.7 0 300 0C283.3 0 266.7 0 250 0C233.3 0 216.7 0 200 0C183.3 0 166.7 0 150 0C133.3 0 116.7 0 100 0C83.3 0 66.7 0 50 0C33.3 0 16.7 0 8.3 0L0 0Z" fill="#a20e96"></path><path d="M0 15L8.3 15C16.7 15 33.3 15 50 14.2C66.7 13.3 83.3 11.7 100 11.3C116.7 11 133.3 12 150 14.2C166.7 16.3 183.3 19.7 200 19.8C216.7 20 233.3 17 250 15.8C266.7 14.7 283.3 15.3 300 16.3C316.7 17.3 333.3 18.7 350 19.5C366.7 20.3 383.3 20.7 400 20.7C416.7 20.7 433.3 20.3 450 20.5C466.7 20.7 483.3 21.3 500 20C516.7 18.7 533.3 15.3 550 13.8C566.7 12.3 583.3 12.7 600 12.5C616.7 12.3 633.3 11.7 650 13.2C666.7 14.7 683.3 18.3 700 19C716.7 19.7 733.3 17.3 750 15.8C766.7 14.3 783.3 13.7 800 14.7C816.7 15.7 833.3 18.3 850 17.8C866.7 17.3 883.3 13.7 891.7 11.8L900 10L900 0L891.7 0C883.3 0 866.7 0 850 0C833.3 0 816.7 0 800 0C783.3 0 766.7 0 750 0C733.3 0 716.7 0 700 0C683.3 0 666.7 0 650 0C633.3 0 616.7 0 600 0C583.3 0 566.7 0 550 0C533.3 0 516.7 0 500 0C483.3 0 466.7 0 450 0C433.3 0 416.7 0 400 0C383.3 0 366.7 0 350 0C333.3 0 316.7 0 300 0C283.3 0 266.7 0 250 0C233.3 0 216.7 0 200 0C183.3 0 166.7 0 150 0C133.3 0 116.7 0 100 0C83.3 0 66.7 0 50 0C33.3 0 16.7 0 8.3 0L0 0Z" fill="#91068b"></path><path d="M0 11L8.3 10.8C16.7 10.7 33.3 10.3 50 9.8C66.7 9.3 83.3 8.7 100 8.2C116.7 7.7 133.3 7.3 150 7.3C166.7 7.3 183.3 7.7 200 8.2C216.7 8.7 233.3 9.3 250 8.8C266.7 8.3 283.3 6.7 300 6.7C316.7 6.7 333.3 8.3 350 9.8C366.7 11.3 383.3 12.7 400 11.8C416.7 11 433.3 8 450 7.7C466.7 7.3 483.3 9.7 500 9.8C516.7 10 533.3 8 550 7.8C566.7 7.7 583.3 9.3 600 10.7C616.7 12 633.3 13 650 13.5C666.7 14 683.3 14 700 12.8C716.7 11.7 733.3 9.3 750 8.2C766.7 7 783.3 7 800 7.7C816.7 8.3 833.3 9.7 850 9.5C866.7 9.3 883.3 7.7 891.7 6.8L900 6L900 0L891.7 0C883.3 0 866.7 0 850 0C833.3 0 816.7 0 800 0C783.3 0 766.7 0 750 0C733.3 0 716.7 0 700 0C683.3 0 666.7 0 650 0C633.3 0 616.7 0 600 0C583.3 0 566.7 0 550 0C533.3 0 516.7 0 500 0C483.3 0 466.7 0 450 0C433.3 0 416.7 0 400 0C383.3 0 366.7 0 350 0C333.3 0 316.7 0 300 0C283.3 0 266.7 0 250 0C233.3 0 216.7 0 200 0C183.3 0 166.7 0 150 0C133.3 0 116.7 0 100 0C83.3 0 66.7 0 50 0C33.3 0 16.7 0 8.3 0L0 0Z" fill="#800080"></path></svg>
        </div>
      
      <div className='feed'>
          {messages?.map((message, _index) => 
            <div key = {_index}>
                <div className='question bubble'>{message.author}</div>
                <div className='response bubble'>{message.bot}</div>
            </div>
          )}

      </div>
      <textarea value = {text} onChange={e => setText(e.target.value)}/>
      <button onClick={getResponse}>Enter</button>
    </div>
  )
}

export default App
